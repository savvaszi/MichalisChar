---
/**
 * Newsletter Subscription Section
 */
---

<section class="relative w-full py-20 md:py-28 overflow-hidden">
  <!-- Animated Background -->
  <div class="absolute inset-0 bg-gradient-to-br from-secondary via-primary to-accent">
    <div class="absolute inset-0 opacity-20">
      <svg preserveAspectRatio="none" width="100%" height="100%" class="absolute inset-0">
        <defs>
          <pattern id="dots" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
            <circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/>
          </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#dots)"/>
      </svg>
    </div>
  </div>

  {/* Floating Donuts Decoration */}
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-10 left-10 text-4xl opacity-20 animate-float">üç©</div>
    <div class="absolute top-1/3 right-20 text-5xl opacity-20 animate-float" style="animation-delay: 1s;">üç©</div>
    <div class="absolute bottom-20 left-1/4 text-4xl opacity-20 animate-float" style="animation-delay: 2s;">üç©</div>
    <div class="absolute bottom-10 right-10 text-5xl opacity-20 animate-float" style="animation-delay: 1.5s;">üç©</div>
  </div>

  <div class="relative max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center space-y-8 animate-fade-in-up">
      {/* Header */}
      <div class="space-y-4">
        <div class="inline-block">
          <span class="px-4 py-2 rounded-full bg-white/20 text-white text-sm font-semibold tracking-wide backdrop-blur-sm border border-white/30">
            üì¨ Stay Connected
          </span>
        </div>
        <h2 class="text-4xl md:text-5xl font-bold text-white leading-tight">
          Get Fresh Updates &
          <span class="block text-yellow-200">Exclusive Offers</span>
        </h2>
        <p class="text-lg text-white/80 max-w-xl mx-auto">
          Be the first to know about new flavors, special promotions, and limited-time offers. Plus, get 15% off your next order!
        </p>
      </div>

      {/* Newsletter Form */}
      <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20 hover:border-white/40 transition-all duration-300 shadow-2xl">
        <form class="space-y-4" id="newsletter-form">
          <div class="space-y-3">
            {/* Email Input */}
            <div class="relative group">
              <input
                type="email"
                placeholder="your@email.com"
                required
                class="w-full px-6 py-4 rounded-xl bg-white/20 border-2 border-white/30 text-white placeholder-white/50 focus:outline-none focus:border-white focus:bg-white/30 transition-all duration-300 backdrop-blur-sm"
                id="newsletter-email"
              />
              <div class="absolute right-4 top-4 text-white/40 group-focus-within:text-white/80 transition-colors">
                ‚úâÔ∏è
              </div>
            </div>

            {/* Checkbox */}
            <label class="flex items-center gap-3 text-white/80 hover:text-white transition-colors cursor-pointer group">
              <input
                type="checkbox"
                class="w-5 h-5 rounded border-2 border-white/30 bg-white/10 checked:bg-white checked:border-white cursor-pointer transition-all"
                id="newsletter-agree"
                checked
              />
              <span class="text-sm leading-relaxed">
                I agree to receive delicious updates about new donuts and special offers
              </span>
            </label>
          </div>

          {/* Submit Button */}
          <button
            type="submit"
            class="w-full group relative px-8 py-4 bg-white text-primary rounded-xl font-bold text-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:shadow-white/20 hover:-translate-y-1 flex items-center justify-center gap-2 active:scale-95"
          >
            <span class="relative z-10 flex items-center gap-2 group-hover:translate-x-1 transition-all">
              Subscribe Now
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
              </svg>
            </span>
            <div class="absolute inset-0 bg-gradient-to-r from-primary to-secondary opacity-0 group-hover:opacity-20 transition-opacity"></div>
          </button>

          {/* Success Message */}
          <div
            id="newsletter-success"
            class="hidden animate-fade-in-up text-white text-sm font-medium p-4 bg-green-500/20 border border-green-500/30 rounded-lg text-center"
          >
            ‚úÖ Thanks for subscribing! Check your email for your 15% discount code.
          </div>

          {/* Error Message */}
          <div
            id="newsletter-error"
            class="hidden animate-fade-in-up text-white text-sm font-medium p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-center"
          >
            ‚ùå Please enter a valid email address.
          </div>
        </form>
      </div>

      {/* Benefits */}
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-white/90 text-sm pt-4">
        {[
          { emoji: "üéÅ", text: "15% Off First Order" },
          { emoji: "üìß", text: "Weekly Specials" },
          { emoji: "üîî", text: "Early Access to New Flavors" }
        ].map((benefit, index) => (
          <div
            key={index}
            class="flex items-center justify-center gap-2 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-all duration-300 cursor-pointer group"
          >
            <span class="text-lg group-hover:scale-125 transition-transform">{benefit.emoji}</span>
            <span class="group-hover:text-white transition-colors">{benefit.text}</span>
          </div>
        ))}
      </div>

      {/* Privacy Note */}
      <p class="text-white/60 text-xs pt-4">
        We respect your privacy. Unsubscribe anytime. See our
        <a href="/privacy" class="underline hover:text-white transition-colors">privacy policy</a>.
      </p>
    </div>
  </div>
</section>

<script>
  const form = document.getElementById('newsletter-form');
  const emailInput = document.getElementById('newsletter-email');
  const successMsg = document.getElementById('newsletter-success');
  const errorMsg = document.getElementById('newsletter-error');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Reset messages
    successMsg?.classList.add('hidden');
    errorMsg?.classList.add('hidden');

    const email = emailInput?.value;

    // Basic validation
    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      errorMsg?.classList.remove('hidden');
      return;
    }

    try {
      // Simulate API call (replace with actual endpoint)
      await new Promise(resolve => setTimeout(resolve, 500));

      // Show success message
      successMsg?.classList.remove('hidden');

      // Reset form
      form.reset();

      // Hide success message after 5 seconds
      setTimeout(() => {
        successMsg?.classList.add('hidden');
      }, 5000);
    } catch (error) {
      errorMsg?.classList.remove('hidden');
    }
  });
</script>

<style is:global>
  @keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(10deg); }
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-float {
    animation: float 4s ease-in-out infinite;
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.4s ease-out;
  }
</style>
